<!DOCTYPE html>
<html>
<head>
<title>Cart</title>
</head>

<body>

<h2>Your Cart</h2>
<div id="cartItems"></div>

<script type="module">
import { auth, db } from "./firebase.js";
import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js";

const container = document.getElementById("cartItems");

onAuthStateChanged(auth, async user => {
  container.innerHTML = "";

  if (!user) {
    container.innerHTML = "<p>Please login</p>";
    return;
  }

  const snap = await getDocs(collection(db, "carts", user.uid, "items"));

  snap.forEach(doc => {
    const d = doc.data();
    container.innerHTML += `<p>${d.name} - â‚¹${d.price}</p>`;
  });
});
</script>

</body>
</html>
