<script type="module">
import { auth, db } from "./firebase.js";
import { onAuthStateChanged } from 
"https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js";
import { collection, addDoc } from 
"https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js";

let currentUser = null;

onAuthStateChanged(auth, (user) => {
  currentUser = user;
});

window.addToCart = async function () {
  if (!currentUser) {
    alert("Please login to add items to cart");
    return;
  }

  await addDoc(collection(db, "carts", currentUser.uid, "items"), {
    name: "boAt Airdopes 131",
    price: 999,
    img: "boatbud3",
    createdAt: Date.now()
  });

  alert("Added to cart");
};

window.goToCart = function () {
  if (!currentUser) {
    alert("Login required");
    return;
  }
  location.href = "cart.html";
};
</script>
